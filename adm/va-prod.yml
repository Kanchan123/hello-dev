version: 0.1
component: build
timeoutInSeconds: 6000
runAs: root
shell: bash

env:
  variables:
    pomFileLocation: /workspace/Source/pom.xml
    compId: ocid1.compartment.oc1..aaaaaaaaiglmbwo3raoecqras722lxwpcgkb7gu3jhisa3iagind3fkoxpmq
    reportName: "reportName"
    kbId: ocid1.service.oc1.iad.amaaaaaab6fywtyalobukpan7s655fllbnh2ovdudmujhoil6zrytrkkcyaq
    abc: /workspace/Source
#   exportedVariables:
#     - version

steps:
- type: VulnerabilityAudit
  name: "Vulnerability Audit Step"
  configuration:
    buildType: maven
    pomFilePath: ${OCI_PRIMARY_SOURCE_DIR}/pom.xml
    packagesToIgnore:
      - com.oracle.*
      - org.apache.logging
    maxPermissibleCvssV2Score: 10.0
    maxPermissibleCvssV3Score: 10.0
  knowledgeBaseId: ocid1.admknowledgebase.oc1.iad.amaaaaaam4dsnniaevc7chqy6kwsx5lkeu3kemo3m2h4v7qnm5cxlcx4es6a
  vulnerabilityAuditCompartmentId: ocid1.compartment.oc1..aaaaaaaafkqteb2m6oygf6hr4wtpkf4g3il45zj26zsnhtx7umr54t7sxlga
#   vulnerabilityAuditCompartmentId: ocid1.compartment.oc1..aaaaaaaaiglmbwo3raoecqras722lxwpcgkb7gu3jhisa3iagind3fkoxpmq
  vulnerabilityAuditName: report1
